// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

//  mysql data base 
datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model users {
  id                Int                 @id @default(autoincrement())
  email             String              @unique @db.VarChar(50)
  name              String              @db.VarChar(50)
  password          String
  role              users_role?
  address           String?
  photo             String
  phone             Int?
  gender            String
  discord           String?
  term              Boolean
  verifiedCode      Int?
  createdAt         DateTime            @default(now()) @db.Timestamp(0)
  updatedAt         DateTime            @default(now()) @updatedAt @db.Timestamp(0)
  student_feedbacks student_feedbacks[]
}

model courses {
  id                 Int                  @id @default(autoincrement())
  name               String               @db.VarChar(50)
  description        String
  photo_url          String
  video_url          String
  price              Int
  discount           Float?
  createdAt          DateTime             @default(now()) @db.Timestamp(0)
  updatedAt          DateTime             @default(now()) @updatedAt @db.Timestamp(0)
  inside_this_course inside_this_course[]
  facilities         facilities[]
  learning_purposes  learning_purposes[]
  prerequisites      prerequisites[]
  student_feedbacks  student_feedbacks[]
  mentors            mentors[]
  course_faqs        course_faqs[]
  learning_objects   learning_objects[]
}

//  inside_this_course model 
model inside_this_course {
  id        Int     @id @default(autoincrement())
  name      String  @db.VarChar(400)
  course_id Int
  courses   courses @relation(fields: [course_id], references: [id], onDelete: Restrict, onUpdate: Cascade)
}

//  learning_objects model 
model learning_objects {
  id        Int     @id @default(autoincrement())
  name      String  @db.VarChar(400)
  course_id Int
  courses   courses @relation(fields: [course_id], references: [id], onDelete: Restrict, onUpdate: Cascade)
}

//  facilities 
model facilities {
  id        Int     @id @default(autoincrement())
  name      String  @db.VarChar(400)
  course_id Int
  courses   courses @relation(fields: [course_id], references: [id], onDelete: Restrict, onUpdate: Cascade)
}

//  learning_purposes 
model learning_purposes {
  id        Int     @id @default(autoincrement())
  name      String  @db.VarChar(400)
  course_id Int
  courses   courses @relation(fields: [course_id], references: [id], onDelete: Restrict, onUpdate: Cascade)
}

//  prerequisites 
model prerequisites {
  id        Int     @id @default(autoincrement())
  name      String  @db.VarChar(400)
  course_id Int
  courses   courses @relation(fields: [course_id], references: [id], onDelete: Restrict, onUpdate: Cascade)
}

//  student_feedbacks 
model student_feedbacks {
  id          Int     @id @default(autoincrement())
  description String
  course_id   Int
  student_id  Int
  courses     courses @relation(fields: [course_id], references: [id], onDelete: Restrict, onUpdate: Cascade)
  users       users   @relation(fields: [student_id], references: [id], onDelete: Restrict, onUpdate: Cascade)

  @@unique([course_id, student_id])
}

//  mentors model 
model mentors {
  id          Int     @id @default(autoincrement())
  name        String  @db.VarChar(400)
  photo       String
  about       String  @db.VarChar(250)
  description String
  course_id   Int
  courses     courses @relation(fields: [course_id], references: [id], onDelete: Restrict, onUpdate: Cascade)
}

model course_faqs {
  id          Int     @id @default(autoincrement())
  description String
  title       String
  course_id   Int
  courses     courses @relation(fields: [course_id], references: [id], onDelete: Restrict, onUpdate: Cascade)
}

// / facilities
// id
// course_id
// title
// logged_in_user_id

// / courses
// id
// title
// description
// photo_url
// video_url
//  price int
//  discount int
// logged_in_user_id

// course description 

// Learning_objects
// id
// course_id
// title
// logged_in_user_id

// // prerequisite
// id
// course_id
// title
// logged_in_user_id
enum users_role {
  student
  admin
  mentors
}
